{% extends 'base.html' %}

{% block title %}Community - My Health Project{% endblock %}

{% block content %}
<div class="community-header">
  <ul class="nav nav-tabs">
    <li class="nav-item">
      <a class="nav-link active" href="#">Recommend</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#">Favour</a>
    </li>
  </ul>
</div>

<div class="community-body">
  {% for post in posts %}
  <div class="post card mb-3">
    <div class="card-body">
      <div class="post-header d-flex align-items-center mb-2">
        <img src="{{ post.user.profile_image_url|default:'https://via.placeholder.com/40' }}" 
             alt="User Avatar" class="rounded-circle mr-2" width="40" height="40">
        <strong class="mr-2">{{ post.user.username }}</strong>
        <span class="text-muted">{{ post.created_at }}</span>
      </div>
      <p class="post-content">{{ post.content }}</p>

      {% if post.image %}
      <div class="post-image">
        <img src="{{ post.image.url }}" alt="post image" class="img-fluid">
      </div>
      {% endif %}

      <div class="post-actions mt-2 d-flex justify-content-between">
        <span>👍 {{ post.likes_count }} </span>
        <span>💬 {{ post.comments_count }} </span>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}